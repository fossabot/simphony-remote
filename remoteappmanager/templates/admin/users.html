{% extends "admin/page.html" %}


{% block main_box_title %}Users{% endblock %}
{% block main_box_body %}
  <div class="pull-right">
    <button class="btn btn-primary createnew"
            data-toggle="modal"
            data-target="#create-new-dialog">Create New</button>
  </div>
  {% call macros.table(["ID", "Name", "Policies", "Remove"]) %}
    {% for u in users %}
      <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.name }}</td>
          <td><a href="{{ base_url }}users/{{ u.id }}/accounting/">Show</a></td>
          <td><button
                  class="btn btn-danger"
                  data-value="{{ u.id }}"
                  data-name="{{ u.name }}"
                  data-toggle="modal"
                  data-target="#action-dialog">Remove</button></td>
      </tr>
    {% endfor %}
  {% endcall %}
{% endblock %}

{% block dialogs %}
  {{ super() }}
    {% call macros.modal_dlg('Action', btn_label='OK') %}
    {% endcall %}
    {% call macros.modal_dlg('Create New', btn_label='OK', btn_class="btn-primary", buttons_dismiss=false) %}
        <form>
            <label for="user-name">User name</label>
            <input type="text" class="form-control" id="user-name">
            <div class="alert alert-danger" role="alert">User name cannot be empty</div>
        </form>
    {% endcall %}
{% endblock %}

{% block script_init %}
    {{ super() }}
        <script type="text/javascript">
            require(["admin/tabular/controller"]);
            require(["admin/users/controller"]);
        </script>
{% endblock %}
