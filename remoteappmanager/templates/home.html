{% extends "page.html" %}

{% block main %}
<style>
.va {
    display: inline-block;
    vertical-align: middle;
    float: none;
}
</style>
<div class="container">

  <div class="row text-center">
    <h1>Available Applications</h1>
  </div>
  <div class="row col-sm-offset-2 col-sm-8">
      {% if error_message %}
          <p class="spawn-error-msg text-danger">
              {{error_message}}
          </p>
      {% endif %}
      {% for info in images_info %}
      <form enctype="multipart/form-data" action="{{base_url}}" method="post" role="form">
        <div class="row">
            {% if info.image.icon_128 == '' %}
                <img src="{{ static_url("images/generic_appicon_128.png") }}" class="col-sm-2 va" />
            {% else %}
                <img src="data:image/png;base64,{{ info.image.icon_128 }}" class="col-sm-2 va" />
            {% endif %}
            {% if info.image.ui_name == '' %}
                <div class="col-sm-7 va"><h4>{{info.image.name}}</h4></div>
            {% else %}
                <div class="col-sm-7 va"><h4>{{info.image.ui_name}}</h4></div>
            {% endif %}
            {% if info.container == None %}
                <input type="hidden" name="mapping_id" value="{{info.mapping_id}}">
                <div class="col-sm-2 va">
                    <button type="submit" name="action" value="start" class="btn btn-primary">Start</button>
                </div>
            {% else %}
                <input type="hidden" name="container_id" value="{{info.container.docker_id}}">
                <div class="col-sm-1 va">
                    <button type="submit" name="action" value="view" class="btn btn-success">View</button>
                </div>
                <div class="col-sm-1 va">
                    <button type="submit" name="action" value="stop" class="btn btn-danger">Stop</button>
                </div>
            {% endif %}
        </div>
      </form>
      {% endfor %}
  </div>

  <div class="row">
    <div class="text-center">
      {% if user.admin %}
      <a id="admin" class="btn btn-lg btn-primary" href="{{base_url}}admin">Admin</a>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}

{% block script %}
<script type="text/javascript">
require(["home"]);
</script>
{% endblock %}
